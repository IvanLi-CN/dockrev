<svg xmlns="http://www.w3.org/2000/svg" width="1440" height="900" viewBox="0 0 1440 900">
  <defs>
    <style>
      :root {
        /* DaisyUI theme tokens (dark) */
        --color-base-100: #0f172a;
        --color-base-200: #0b1020;
        --color-base-300: #070b15;
        --color-base-content: #e5e7eb;

        --color-primary: #38bdf8;
        --color-primary-content: #001018;
        --color-success: #22c55e;
        --color-warning: #f59e0b;
        --color-error: #fb7185;
        --color-error-content: #1a0006;

        --bg: var(--color-base-200);
        --panel: var(--color-base-100);
        --panel2: var(--color-base-200);
        --dockrev-surface: rgba(255,255,255,.035);
        --muted: rgba(229,231,235,.78);
        --muted2: rgba(229,231,235,.56);
        --text: rgba(229,231,235,.92);
        --ok: var(--color-success);
        --warn: var(--color-warning);
        --bad: var(--color-error);
      }

      text { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
      .title { font-size: 16px; fill: var(--text); font-weight: 650; }
      .h1 { font-size: 22px; fill: var(--text); font-weight: 750; }
      .h2 { font-size: 14px; fill: var(--text); font-weight: 650; }
      .label { font-size: 12px; fill: var(--muted); }
      .muted { font-size: 12px; fill: var(--muted2); }
      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; fill: var(--muted); }

      .btnPrimary { fill: var(--color-primary); }
      .btnDanger { fill: var(--color-error); }
      .btnText { font-size: 12px; fill: var(--color-primary-content); font-weight: 800; }
      .btnDangerText { font-size: 12px; fill: var(--color-error-content); font-weight: 800; }
      .btnGhost { fill: rgba(229,231,235,.08); }
      .btnGhostText { font-size: 12px; fill: rgba(229,231,235,.86); font-weight: 750; }
      .btnDisabled { fill: rgba(229,231,235,.06); stroke: rgba(229,231,235,.08); stroke-width: 1; }
      .btnDisabledText { font-size: 12px; fill: rgba(229,231,235,.44); font-weight: 750; }

      .chip { fill: rgba(229,231,235,.08); }
      .chipText { font-size: 11px; fill: rgba(229,231,235,.78); font-weight: 650; }
      .card { fill: var(--panel); }
      .row { fill: var(--dockrev-surface); }
      .ok { fill: var(--ok); }
      .warn { fill: var(--warn); }
      .bad { fill: var(--bad); }
      .icon { fill: none; stroke: rgba(255,255,255,.44); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2; }
    </style>
  </defs>

  <rect x="0" y="0" width="1440" height="900" fill="var(--bg)"/>

  <!-- Top bar -->
  <rect x="0" y="0" width="1440" height="64" fill="var(--panel2)"/>
  <text x="28" y="40" class="title">Dockrev Supervisor</text>
  <text x="220" y="40" class="muted">自我升级</text>

  <!-- Top actions (disabled when offline) -->
  <rect x="962" y="18" width="128" height="28" rx="8" class="btnGhost"/>
  <text x="1026" y="37" class="btnGhostText" text-anchor="middle">返回 Dockrev</text>
  <rect x="1100" y="18" width="120" height="28" rx="8" class="btnDisabled"/>
  <text x="1160" y="37" class="btnDisabledText" text-anchor="middle">预览</text>
  <rect x="1230" y="18" width="120" height="28" rx="8" class="btnDisabled"/>
  <text x="1290" y="37" class="btnDisabledText" text-anchor="middle">开始升级</text>
  <rect x="1360" y="18" width="52" height="28" rx="8" class="btnDisabled"/>
  <text x="1386" y="37" class="btnDisabledText" text-anchor="middle">回滚</text>

  <!-- Sidebar -->
  <rect x="0" y="64" width="256" height="836" fill="var(--panel2)"/>
  <text x="28" y="110" class="label">导航</text>
  <rect x="16" y="130" width="224" height="40" rx="10" fill="rgba(56,189,248,.12)"/>
  <text x="44" y="155" class="h2">自我升级</text>
  <rect x="16" y="178" width="224" height="40" rx="10" fill="rgba(255,255,255,.00)"/>
  <text x="44" y="203" class="label">日志</text>
  <rect x="16" y="226" width="224" height="40" rx="10" fill="rgba(255,255,255,.00)"/>
  <text x="44" y="251" class="label">系统信息</text>

  <text x="28" y="320" class="label">健康探测</text>
  <rect x="16" y="336" width="224" height="28" rx="8" class="chip"/>
  <text x="128" y="355" class="chipText" text-anchor="middle">/supervisor/health: ok</text>

  <!-- Main content -->
  <text x="296" y="112" class="h1">Dockrev 自我升级</text>
  <text x="296" y="138" class="muted">离线态：状态 API 临时不可达，展示错误摘要 + Retry，并保留最后一次已知状态</text>

  <!-- Status banner (offline for status endpoint) -->
  <rect x="296" y="160" width="1116" height="72" rx="14" fill="rgba(251,113,133,.10)"/>
  <circle cx="322" cy="184" r="6" class="bad"/>
  <text x="336" y="188" class="label">offline · GET /supervisor/self-upgrade failed</text>
  <text x="336" y="212" class="muted">timeout / network error · last known state shown below</text>

  <rect x="1260" y="178" width="132" height="28" rx="8" class="btnGhost"/>
  <text x="1326" y="197" class="btnGhostText" text-anchor="middle">Retry</text>

  <!-- Left card: last known versions -->
  <rect x="296" y="246" width="540" height="236" rx="16" class="card"/>
  <text x="316" y="282" class="title">版本与目标（last known）</text>
  <text x="316" y="316" class="label">Current</text>
  <text x="420" y="316" class="mono">1.2.2@sha256:…aa</text>
  <text x="316" y="346" class="label">Target</text>
  <text x="420" y="346" class="mono">1.2.3@sha256:…bb</text>
  <text x="316" y="376" class="label">Rollback</text>
  <text x="420" y="376" class="muted">on failure (required)</text>
  <text x="316" y="418" class="label">opId</text>
  <text x="420" y="418" class="mono">sup_8f2a...</text>
  <text x="316" y="446" class="muted">last update: 2026-01-24 14:12:42</text>

  <!-- Right card: actions are disabled in offline -->
  <rect x="872" y="246" width="540" height="236" rx="16" class="card"/>
  <text x="892" y="282" class="title">操作</text>
  <text x="892" y="316" class="muted">offline 时禁用：预览 / 开始升级 / 回滚</text>
  <text x="892" y="340" class="muted">可用操作：Retry（重新拉取状态）</text>
  <rect x="892" y="366" width="240" height="44" rx="12" class="row"/>
  <text x="908" y="394" class="mono">error: timeout</text>
  <rect x="1146" y="374" width="246" height="28" rx="8" class="chip"/>
  <text x="1269" y="393" class="chipText" text-anchor="middle">hint: check network/proxy</text>

  <!-- Logs (cached) -->
  <rect x="296" y="498" width="1116" height="322" rx="16" class="card"/>
  <text x="316" y="534" class="title">日志（cached）</text>
  <rect x="316" y="556" width="1076" height="244" rx="12" class="row"/>
  <text x="336" y="584" class="mono">14:12:10 INFO  precheck: current=1.2.2 digest=sha256:…aa</text>
  <text x="336" y="608" class="mono">14:12:14 INFO  pull: ghcr.io/ivanli-cn/dockrev:1.2.3</text>
  <text x="336" y="632" class="mono">14:12:20 INFO  apply: docker compose up -d dockrev</text>
  <text x="336" y="656" class="mono">14:12:28 WARN  wait_healthy: retrying (Dockrev restarting)</text>
  <text x="336" y="680" class="mono">14:12:40 INFO  wait_healthy: ok</text>
  <text x="336" y="704" class="mono">14:12:42 INFO  done: succeeded</text>
</svg>

